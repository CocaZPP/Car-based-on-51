C51 COMPILER V9.01   MAIN                                                                  12/20/2016 20:45:15 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: G:\KEIL\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include "reg52.h"                       //´ËÎÄ¼þÖÐ¶¨ÒåÁËµ¥Æ¬»úµÄÒ»Ð©ÌØÊâ¹¦ÄÜ¼Ä´æÆ÷
   2          #include "math.h"
   3          typedef unsigned int uint;        //¶ÔÊý¾ÝÀàÐÍ½øÐÐÉùÃ÷¶¨Òå
   4          typedef unsigned char uchar;
   5          sbit LSA=P2^2;
   6          sbit LSB=P2^3;
   7          sbit LSC=P2^4;
   8          uchar num,ring;
   9          uint a;
  10          uchar code smgduan[]={0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f,0x77,0x7c,0x39,0x5e,0x79,0x71};//¹
             -²Òõ¼«×ÖÐÍÂë
  11          /*******************************************************************************
  12          * º¯ Êý Ãû         : Int1Init()
  13          * º¯Êý¹¦ÄÜ                 : ÉèÖÃÍâ²¿ÖÐ¶Ï0
  14          * Êä    Èë         : ÎÞ
  15          * Êä    ³ö         : ÎÞ
  16          *******************************************************************************/
  17          void Int0Init()
  18          {
  19   1              //ÉèÖÃINT0
  20   1              IT0=1;//Ìø±äÑØ³ö·¢·½Ê½£¨ÏÂ½µÑØ£©
  21   1              EX0=1;//´ò¿ªINT0µÄÖÐ¶ÏÔÊÐí¡£    
  22   1              EA=1;//´ò¿ª×ÜÖÐ¶Ï       
  23   1      }
  24          /*******************************************************************************
  25          * º¯ Êý Ãû         : Int0()     interrupt 0
  26          * º¯Êý¹¦ÄÜ                 : Íâ²¿ÖÐ¶Ï0µÄÖÐ¶Ïº¯Êý
  27          * Êä    Èë         : ÎÞ
  28          * Êä    ³ö         : ÎÞ
  29          *******************************************************************************/
  30          
  31          void Int0()     interrupt 0             //Íâ²¿ÖÐ¶Ï0µÄÖÐ¶Ïº¯Êý
  32          {       ET1=1;//´ò¿ª¶¨Ê±Æ÷1ÖÐ¶ÏÔÊÐí
  33   1          ring++;
  34   1      }
  35          /*******************************************************************************
  36          * º¯ Êý Ãû         : Timer1Init
  37          * º¯Êý¹¦ÄÜ                 : ¶¨Ê±Æ÷1³õÊ¼»¯
  38          * Êä    Èë         : ÎÞ
  39          * Êä    ³ö         : ÎÞ
  40          *******************************************************************************/
  41          void Timer1Init()
  42          {
  43   1              TMOD|=0X10;//Ñ¡ÔñÎª¶¨Ê±Æ÷1Ä£Ê½£¬¹¤×÷·½Ê½1£¬½öÓÃTR1´ò¿ªÆô¶¯¡£
  44   1      
  45   1              TH1=0X3cb0;     //¸ø¶¨Ê±Æ÷¸³³õÖµ£¬¶¨Ê±50ms
  46   1              TL1=0X3cb0;     
  47   1      
  48   1              EA=1;//´ò¿ª×ÜÖÐ¶Ï
  49   1              TR1=1;//´ò¿ª¶¨Ê±Æ÷                      
  50   1      }
  51          /*******************************************************************************
  52          * º¯ Êý Ãû         : void Timer1() interrupt 3
  53          * º¯Êý¹¦ÄÜ                 : ¶¨Ê±Æ÷0ÖÐ¶Ïº¯Êý
  54          * Êä    Èë         : ÎÞ
C51 COMPILER V9.01   MAIN                                                                  12/20/2016 20:45:15 PAGE 2   

  55          * Êä    ³ö         : ÎÞ
  56          *******************************************************************************/
  57          void Timer1() interrupt 3
  58          {               TH1=0X3cb0;     //¸ø¶¨Ê±Æ÷¸³³õÖµ£¬¶¨Ê±50ms
  59   1                  TL1=0X3cb0;
  60   1                      num++;
  61   1                       if(num==20)    //1S
  62   1                       { a=ring;
  63   2                         num=0;
  64   2                         ring=0;
  65   2                }
  66   1                       
  67   1      }
  68          
  69          void display()
  70          {       LSA=0;LSB=0;LSC=0;
  71   1                P0 = smgduan[a % 100 / 10];
  72   1                      LSA=1;LSB=0;LSC=0;
  73   1            P0= smgduan[a % 10];      
  74   1      
  75   1      }
  76          
  77          void main()
  78          {       Int0Init();
  79   1           Timer1Init();
  80   1      
  81   1         while(1)
  82   1              { 
  83   2                 display();
  84   2      
  85   2              }
  86   1      
  87   1      
  88   1      
  89   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    147    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
